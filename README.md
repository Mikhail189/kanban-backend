# üóÇÔ∏è Kanban Backend (FastAPI + PostgreSQL + Docker)

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã–π backend –¥–ª—è **Kanban-—Å–∏—Å—Ç–µ–º—ã** —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ **WebSocket**.  
–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é **Docker Compose** –∏ –≤–∫–ª—é—á–∞–µ—Ç –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞.

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1Ô∏è‚É£ board-service
–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (**FastAPI**) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á  
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞  
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **file-service**  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **WebSocket** –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
  - `task_created`
  - `task_updated`
  - `task_deleted`

### 2Ô∏è‚É£ file-service
–û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ **Yandex Object Storage (S3)**.  
–§–∞–π–ª—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∑–∞–¥–∞—á–∞–º –ø–æ `task_id`.

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- üêç **Python 3.11**  
- ‚ö° **FastAPI**  
- üóÑÔ∏è **SQLAlchemy + Alembic**  
- üêò **PostgreSQL**  
- üåê **HTTPX** ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏  
- üß™ **Pytest + pytest-asyncio**  
- üê≥ **Docker Compose**

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **Docker**.

–ó–∞–ø—É—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker compose up --build
```
## üöÄ –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º

| –°–µ—Ä–≤–∏—Å        | URL                          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ              |
|----------------|------------------------------|--------------------------|
| board-service  | [http://localhost:8000/docs](http://localhost:8000/docs) | API –∑–∞–¥–∞—á (Swagger UI)  |
| file-service   | [http://localhost:8001/docs](http://localhost:8001/docs) | API —Ñ–∞–π–ª–æ–≤              |

---

## üí¨ WebSocket

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–æ–±—ã—Ç–∏—è—Ö –ø–æ–¥–∫–ª—é—á–∞–π—Å—è –∫ –∞–¥—Ä–µ—Å—É:

```bash
ws://localhost:8000/ws
```

## üí¨ –ü—Ä–∏–º–µ—Ä —Å–æ–±—ã—Ç–∏—è

```json
{
  "event": "task_created",
  "task": {
    "id": 1,
    "title": "New task",
    "status": "todo"
  }
}
```
## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—Ç—å production-–¥–∞–Ω–Ω—ã–µ.  
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –º–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –±–∞–∑—ã:

- `kanban-db-test`
- `file-db-test`

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
docker compose exec board-service pytest -v
```

## üß∞ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π `.env` —Ñ–∞–π–ª.

–ü—Ä–∏–º–µ—Ä –¥–ª—è `file-service/.env`:

```env
YANDEX_S3_BUCKET=<BUCKET>
YANDEX_S3_ENDPOINT=https://storage.yandexcloud.net
YANDEX_S3_ACCESS_KEY_ID=<YOUR_ACCESS_KEY>
YANDEX_S3_SECRET_ACCESS_KEY=<YOUR_SECRET_KEY>
‚ö†Ô∏è –í–∞–∂–Ω–æ:
–ö–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ Yandex S3 –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
–ò—Å–ø–æ–ª—å–∑—É–π .env.example, –¥–æ–±–∞–≤–∏–≤ —Å–≤–æ–∏ –∫–ª—é—á–∏.
```
## üß† –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.  
- –ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –±–∞–∑—ã, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç production.  
- **WebSocket-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.